<section class="relative min-h-screen flex items-center overflow-hidden group">
  <div id="bg-carousel" class="absolute inset-0 w-full h-full overflow-hidden animate-bg-move-about_us">
    <% if @projectInformationInfor.images.attached? %>
      <% @projectInformationInfor.images.each_with_index do |img, index| %>
        <div class="absolute inset-0 bg-cover bg-center transition-opacity duration-1000
                    <%= index == 0 ? 'opacity-100' : 'opacity-0' %>"
             style="background-image: url('<%= url_for(img) %>');">
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="absolute inset-0 bg-black/40 animate-overlay-fade"></div>


  <div class="relative w-full z-10 h-full flex items-center justify-center text-center px-6">
    <div>
      <p class="text-xs tracking-[0.4em] text-gray-200 mb-4">PROJECT</p>
      <h1 class="text-4xl md:text-5xl font-semibold text-white">Dự án</h1>
    </div>
  </div>
</section>


<script>
  document.addEventListener('DOMContentLoaded', () => {
    const slides = document.querySelectorAll('#bg-carousel > div');
    let current = 0;

    function showSlide(index) {
      slides.forEach((slide, i) => {
        slide.classList.toggle('opacity-100', i === index);
        slide.classList.toggle('opacity-0', i !== index);
      });
    }

    setInterval(() => {
      current = (current + 1) % slides.length;
      showSlide(current);
    }, 5000);
  });
</script>


<div class="flex justify-center">
  <div class="w-[90%] sm:w-[80%] z-47">

    <div style="<%= bg_rgba(Color.first&.background1, 0.8) %>;" class="py-4 md:py-8 px-6 md:px-12 min-h-[200px] shadow-lg mt-[-80px] md:mt-[-120px] backdrop-blur-md">
      <div class="font-light md:text-lg leading-relaxed italic text-center md:text-justify">
        <%= simple_format(@projectInformationInfor&.content || "Chúng tôi đang cập nhật thông tin giới thiệu...") %>
      </div>
    </div>

    <div class="text-center mt-10 mb-8">
      <h2 class="text-3xl md:text-4xl font-extrabold tracking-wide"
          style="color: <%= Color.first&.header || '#ffffff' %>;">
        <span class="inline-block relative">
          DỰ ÁN CỦA CHÚNG TÔI
          <span class="absolute left-1/2 -bottom-2 w-16 h-[3px] -translate-x-1/2 rounded-full" style="background-color: <%= Color.first&.header || '#ffffff' %>;"></span>
        </span>
      </h2>
    </div>

    <%= render "project_informations" %>

  </div>
</div>




<section class="py-28 bg-gray-50">
  <div class="max-w-6xl mx-auto px-6">
    <div class="text-center mb-20 scroll-fade-promotion opacity-0 translate-y-6 transition-all duration-700">
      <p class="text-xs tracking-[0.35em] text-gray-400 mb-4">
        WORKFLOW
      </p>

      <h2 class="text-3xl md:text-4xl font-light text-gray-900 tracking-wide">
        Quy trình làm việc
      </h2>

      <div class="mt-6 flex justify-center">
        <span class="w-20 h-[2px] bg-[#FFD2B8]"></span>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-5 gap-10 text-center">

      <% steps = [
        ["01", "Tư vấn", "Lắng nghe nhu cầu & tư vấn giải pháp phù hợp"],
        ["02", "Thiết kế", "Lên ý tưởng, bản vẽ & phối cảnh chi tiết"],
        ["03", "Sản xuất", "Gia công trực tiếp tại xưởng"],
        ["04", "Thi công", "Lắp đặt chuẩn xác, đúng tiến độ"],
        ["05", "Bàn giao", "Hoàn thiện & nghiệm thu"]
      ] %>

      <% steps.each_with_index do |step, i| %>
        <div
          class="group scroll-fade-promotion opacity-0 translate-y-6
                 transition-all duration-700 hover:-translate-y-2"
          style="transition-delay: <%= i * 120 %>ms;">

          <div class="mx-auto w-14 h-14 flex items-center justify-center
                      rounded-full border border-gray-300
                      text-sm tracking-widest text-gray-400
                      group-hover:border-[#FFD2B8]
                      group-hover:text-[#FFD2B8]
                      transition">
            <%= step[0] %>
          </div>

          <h3 class="mt-6 text-lg font-medium text-gray-900">
            <%= step[1] %>
          </h3>

          <p class="mt-3 text-gray-500 text-sm leading-relaxed">
            <%= step[2] %>
          </p>
        </div>
      <% end %>

    </div>
  </div>
</section>

<%= render "script/index_project_informations" %>